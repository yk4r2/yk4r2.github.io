<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Problems Collection</title>
    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: true,
                packages: ['base', 'ams', 'noerrors', 'noundefined']
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/noundefined']
            }
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --background: #f8fafc;
            --text: #1e293b;
            --card: #ffffff;
            --border: #e2e8f0;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            margin-bottom: 2rem;
            text-align: center;
        }

        .filters {
            margin-bottom: 2rem;
            padding: 1rem;
            background: var(--card);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        select {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--card);
            color: var(--text);
            font-size: 1rem;
        }

        .problems {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .problem-card {
            background: var(--card);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .problem-card:hover {
            transform: translateY(-2px);
        }

        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .difficulty {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .difficulty.easy {
            background: #dcfce7;
            color: #166534;
        }

        .difficulty.medium {
            background: #fef9c3;
            color: #854d0e;
        }

        .difficulty.hard {
            background: #fee2e2;
            color: #991b1b;
        }

        .topic {
            font-size: 0.875rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tag {
            background: #e2e8f0;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            color: #475569;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.25rem;
            color: var(--text);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Math Problems Collection</h1>
        </div>
        
        <div class="filters">
            <label for="difficulty">Filter by difficulty: </label>
            <select id="difficulty">
                <option value="all">All Difficulties</option>
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>
        </div>

        <div id="problems" class="problems">
            <div class="loading">Loading problems...</div>
        </div>
    </div>

    <script>
        async function loadQuestions() {
            try {
                const response = await fetch('https://yk4r2.github.io/questions.json');
                if (!response.ok) {
                    throw new Error('Failed to load questions');
                }
                return await response.json();
            } catch (error) {
                console.error('Error loading questions:', error);
                document.getElementById('problems').innerHTML = 
                    '<div class="loading">Error loading problems. Please try again later.</div>';
                return [];
            }
        }

        function createProblemCard(problem) {
            const card = document.createElement('div');
            card.className = 'problem-card';
            
            const tags = JSON.parse(problem.Tags.replace(/'/g, '"'));
            const companies = JSON.parse(problem.Companies.replace(/'/g, '"'));
            
            card.innerHTML = `
                <div class="problem-header">
                    <span class="topic">${problem.Topic}</span>
                    <span class="difficulty ${problem.Difficulty.toLowerCase()}">${problem.Difficulty}</span>
                </div>
                <div>${problem.task}</div>
                <div class="tags">
                    ${tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    ${companies.map(company => `<span class="tag">${company}</span>`).join('')}
                </div>
            `;
            
            // Trigger MathJax to process the new content
            MathJax.typesetPromise([card]);
            return card;
        }

        async function filterProblems() {
            const difficulty = document.getElementById('difficulty').value;
            const problemsContainer = document.getElementById('problems');
            
            // Get questions if not already loaded
            if (!window.questions) {
                window.questions = await loadQuestions();
            }
            
            problemsContainer.innerHTML = '';
            
            window.questions
                .filter(problem => difficulty === 'all' || problem.Difficulty.toLowerCase() === difficulty)
                .forEach(problem => {
                    problemsContainer.appendChild(createProblemCard(problem));
                });
        }

        document.getElementById('difficulty').addEventListener('change', filterProblems);
        
        // Initial load
        filterProblems();
    </script>
</body>
</html>
